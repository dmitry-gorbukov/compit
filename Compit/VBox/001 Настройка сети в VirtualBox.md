
virtualbox. как настроить подключение по ssh к виртуальной машине ubuntu с хост компьютера windows через сетевой адаптер в режиме  nat?

----------------

Чтобы настроить SSH-подключение к виртуальной машине Ubuntu из Windows через NAT в VirtualBox, нужно выполнить несколько шагов:

## 1. Настройка сети в VirtualBox

### Выберите NAT в настройках VM:
- Откройте настройки виртуальной машины
- Перейдите в раздел "Сеть"
- В поле "Тип подключения" выберите "NAT"

### Добавьте проброс портов:
- В настройках сети нажмите "Дополнительно"
- Выберите "Проброс портов"
- Добавьте новое правило:

```
Имя: SSH (или любое другое)
Протокол: TCP
IP хоста: 127.0.0.1
Порт хоста: 2222
IP гостя: (оставьте пустым)
Порт гостя: 22
```

## 2. Настройка Ubuntu VM

### Установите SSH сервер:
```bash
sudo apt update
sudo apt install openssh-server
```

### Запустите и включите автозагрузку SSH:
```bash
sudo systemctl start ssh
sudo systemctl enable ssh
```

### Проверьте статус:
```bash
sudo systemctl status ssh
```

### Узнайте IP-адрес VM:
```bash
ip addr show
# или
hostname -I
```

## 3. Подключение с Windows

### Используйте команду в PowerShell или CMD:
```bash
ssh username@127.0.0.1 -p 2222
```

### Или с помощью PuTTY:
- Host: 127.0.0.1
- Port: 2222
- Connection type: SSH

## Альтернативный способ - Сетевой мост (Bridged)

Если NAT не подходит, рассмотрите режим "Сетевой мост":
- В настройках сети выберите "Сетевой мост"
- VM получит IP из вашей локальной сети
- Подключайтесь напрямую по IP VM: `ssh username@ip-vm`

## Проверка подключения

1. Убедитесь, что брандмауэр на Ubuntu разрешает SSH:
```bash
sudo ufw allow ssh
```

2. Проверьте, что сервис слушает на порту 22:
```bash
sudo netstat -tlnp | grep :22
```

Теперь вы можете подключаться к вашей Ubuntu VM через SSH с хост-машины Windows!
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE3MjIwNTU1MThdfQ==
-->